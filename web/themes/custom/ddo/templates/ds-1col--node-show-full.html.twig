{#
/**
 * @file
 * Display Suite 1 column template.
 *
 * Available variables:
 * - ds_content_wrapper: wrapper around content
 * - attributes: content region attributes
 * - ds_content: content region
 * Pour débuger : {{ dump(_context["field_media_image"]|keys) }}
 */
#}
<{{ ds_content_wrapper }}{{ attributes.addClass('ds-1col', 'clearfix') }}>

{{ title_suffix.contextual_links }}
<section id="wrap-full-show">
  <div class="div-image-style-banner">
    {{ drupal_image(node.field_media_image.entity.field_media_image.entity.uri.value, 'banner', {responsive: true}) }}
  </div>
  <div class="container wrapper-over-img-abs">
    <div class="row">
      <div class="col">
        <div class="group-text-over-img-abs">
          {{ content.field_festival }}
          {{ content.field_dates }}
          {{ ds_content.node_title }}
          {{ ds_content.field_subtitle }}
        </div>
      </div>
    </div>
  </div>
  <div class="row-anchor-full-show">
    <div class="container">
      {% if not field_casting is empty or not field_production is empty or not field_coproduction is empty or not field_partnerships is empty %}
        <div class="row">
          <div class="col-md-4 offset-md-1 order-md-2">
            <button class="btn btn-secondary" id="book-show">Réserver</button>
          </div>
          <div class="col-md-7 order-md-1">
            {# Test si les champs sont présents #}
            {% if not field_casting is empty %}
              <a href="#casting" class="anchor-show-full">Distribution</a>
            {% endif %}
            {% if not field_production is empty %}
              <a href="#production" class="anchor-show-full">Production</a>
            {% endif %}
            {% if not field_coproduction is empty %}
              <a href="#coproduction" class="anchor-show-full">Coproduction</a>
            {% endif %}
            {% if not field_partnerships is empty %}
              <a href="#partnerships" class="anchor-show-full">Partenariats</a>
            {% endif %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>
  <div class="container">

    <div class="row" >
      <div class="col-md-4 offset-md-1 order-md-2">
        <section class="section-all-show-dates">
          <h3 class="title-all-show-dates">Toutes les dates</h3>
          <ul class="list-unstyled">
            {% for date in node.field_dates %}
              <li>{{ date.value | date('U') |  format_date('show_date') | capitalize }}</li>
            {% endfor %}
          </ul>
        </section>
      </div>
      <div class="col-md-7 order-md-1">
        {# Par la compagnie (ou autre)#}
        {% if not field_by is empty %}
          <div class="field-by">
            <div class="field-by-label">Par :&nbsp;</div>
            <div class="field-by-title">{{ content.field_by.0['#title'] }} </div>
          </div>
        {% endif %}
        {# Liens de partage ####################################################################}
        <div class="share-social-buttons">
          <a class="icon-twitter" target="_blank" title="Partager sur twitter" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fdomainedo.fr{{ path('entity.node.canonical', {'node': content['#node'].id()  }) }}&amp;text=&amp;hashtags=spectacle,Montpellier">
            <span class="visually-hidden-focusable">Twitter</span>
          </a>
          <a class="icon-facebook" title="Partager sur facebook" href="http://www.facebook.com/sharer/sharer.php?u=https://www.domainedo.fr{{ path('entity.node.canonical', {'node': content['#node'].id()  }) }}&t={{ node.label|replace({' ': '_'}) }}" target="_blank" class="share-popup">
            <span class="visually-hidden-focusable">Facebook</span>
          </a>

        </div>
        {# Body #################################################################################}
        {{ ds_content.body }}
        {% if not field_casting is empty %}
          <div id="casting">{{ field_casting }}</div>
        {% endif %}
        {% if not field_production is empty %}
          <div id="production">{{ field_production }}</div>
        {% endif %}
        {% if not field_coproduction is empty %}
          <div id="coproduction">{{ field_coproduction }}</div>
        {% endif %}
        {% if not field_partnerships is empty %}
          <div id="partnerships">{{ field_partnerships }}</div>
        {% endif %}

      </div>
    </div>
  </div>
</section>
</{{ ds_content_wrapper }}>
